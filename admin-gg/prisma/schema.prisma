generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = env("DATABASE_URL")
}

enum UserRole {
  ADMIN
  SUPERADMIN
}

model user {
  id       String  @id @default(uuid())
  name     String?
  email    String  @unique
  password String
  role     UserRole  @default(ADMIN)

  @@map("user")
}

model brand {
  id        String    @id @default(uuid())
  name      String    @unique
  discount  Decimal   @db.Decimal(5, 2) @default(0)
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  isActive  Boolean   @default(true)

  products  product[]
}

model category {
  id        String    @id @default(uuid())
  name      String    @unique
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  isActive  Boolean   @default(true)

  products  product[]
}

model ageGroup {
  id        String    @id @default(uuid())
  label     String    @unique
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  isActive  Boolean   @default(true)

  products  product[]
}

model product {
  id          String        @id @default(uuid())
  name        String
  brandId     String?
  brand       brand?        @relation(fields: [brandId], references: [id], onDelete: SetNull)

  categoryId  String?
  category    category?     @relation(fields: [categoryId], references: [id], onDelete: SetNull)

  ageGroupId  String?
  ageGroup    ageGroup?     @relation(fields: [ageGroupId], references: [id], onDelete: SetNull)

  sku         String?       @unique
  price       Decimal       @db.Decimal(10, 2)
  discount    Decimal       @db.Decimal(5, 2) @default(0)
  keywords    String[]
  description String?
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  isActive    Boolean       @default(true)

  images      productImage[]
}

model productImage {
  id         String   @id @default(uuid())
  productId  String
  url        String
  alt        String?
  isPrimary  Boolean  @default(false)

  product    product  @relation(fields: [productId], references: [id], onDelete: Cascade)
}
